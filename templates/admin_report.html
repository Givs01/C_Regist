{% extends "base_admin.html" %}

{% block content %}

<div class="w-full p-4 bg-gradient-to-br from-slate-900 via-gray-800 to-gray-900">

    {% if is_admin %}

    <!-- =================== SUMMARY CARDS =================== -->
<!-- =================== SUMMARY CARDS =================== -->

<!-- First row: Total Registrations -->
<div class="grid grid-cols-1 gap-4 mb-4">
    <div class="bg-white/10 border border-white/10 rounded-xl p-3 shadow-lg
                backdrop-blur-xl hover:scale-[1.02] transition transform text-center">
        <p class="text-3xl font-bold text-indigo-400">{{ total_regist }}</p>
        <p class="text-sm text-gray-300 mt-1">Total Registrations</p>
    </div>
</div>

<!-- Second row: QR and On-Spot Registrations -->
<div class="grid grid-cols-2 gap-4 mb-6">
    <div class="bg-white/10 border border-white/10 rounded-xl p-3 shadow-lg
                backdrop-blur-xl hover:scale-[1.02] transition transform text-center">
        <p class="text-3xl font-bold text-pink-400">{{ qr_regist }}</p>
        <p class="text-sm text-gray-300 mt-1">QR </p>
    </div>

    <div class="bg-white/10 border border-white/10 rounded-xl p-3 shadow-lg
                backdrop-blur-xl hover:scale-[1.02] transition transform text-center">
        <p class="text-3xl font-bold text-green-400">{{ onspot_regist }}</p>
        <p class="text-sm text-gray-300 mt-1">On-Spot </p>
    </div>
</div>



<!-- =================== PARTICIPANT LIST =================== -->
<div class="bg-white/10 border border-white/10 backdrop-blur-xl 
            rounded-2xl p-6 shadow-xl mb-6">

    <div class="grid grid-cols-2 gap-4 mb-6">
        <h3 class="text-lg font-semibold mb-4 text-indigo-300">All Registrations</h3>
        <!-- CSV EXPORT BUTTON -->
        <div class="flex justify-end mb-4">
            <a href="?export=csv" class="px-4 py-2 bg-indigo-500 text-white rounded-lg text-sm hover:bg-indigo-600 transition">
                Export CSV
            </a>
        </div>
    </div>

    {% if participants %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for p in participants %}
        <div class="bg-white/10 border border-white/20 rounded-xl p-4 shadow-lg backdrop-blur-lg hover:scale-[1.02] transition transform">
            <h4 class="text-lg font-semibold text-indigo-300 mb-2">{{ p.name }}</h4>
            <p class="text-sm text-gray-300"><strong>Email:</strong> {{ p.email }}</p>
            <p class="text-sm text-gray-300"><strong>Contact:</strong> {{ p.contact }}</p>
            <p class="text-sm text-gray-300 break-all"><strong>QR Code:</strong> {{ p.qr_code }}</p>
            <p class="text-sm text-gray-300"><strong>Mode:</strong> {{ p.mode }}</p>
            <p class="text-sm text-gray-300"><strong>Organisation:</strong> {{ p.organisation }}</p>
            <p class="text-sm text-gray-300"><strong>Country:</strong> {{ p.country }}</p>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="text-gray-400 text-sm">No registrations yet.</p>
    {% endif %}

</div>

{% endif %}

</div>

{% endblock %}
